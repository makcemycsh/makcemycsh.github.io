"use strict";var _createClass=function(){function e(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function is_touch_device(){return!!("ontouchstart"in window)}function handleEvents(){$(window).scroll(function(){150<$(this).scrollTop()?($("body").addClass("head-is-fixed"),$(".head-is-fixed").css("margin-top",$(".js-head").outerHeight(!0))):($(".head-is-fixed").css("margin-top",0),$("body").removeClass("head-is-fixed"))}),$(".js-menu-bar").on("click",function(){$(this).toggleClass("is-active")}),is_touch_device()?$(document.body).addClass("is-touch"):$(document.body).addClass("no-touch");var n=$(".js-img-wrapper"),i=void 0,e=void 0,s=void 0,a=void 0,o=!1,c=$(".js-debag");$(document.body).on("pointerout",".js-pointer-event",function(t){}),$(document.body).on("pointerleave",".js-pointer-event",function(t){}),$(document.body).on("pointerover",".js-pointer-event",function(t){}),$(document.body).on("pointerenter",".js-pointer-event",function(t){c.append("<p>pointer.id: "+t.pointerId+"</p>"),i=$(n,$(this))[0].offsetHeight,1.5*+i,n.parent()[0].offsetHeight}),$(document.body).on("pointerdown",".js-pointer-event",function(t){e=t.offsetX,s=t.offsetY;var n=(new Date).getTime()-a;n<600&&0<n?o=(o||console.log("double"),!o):console.log("none"),a=(new Date).getTime()}),$(document.body).on("pointerup",".js-pointer-event",function(t){}),$(document.body).on("pointermove",".js-pointer-event",function(t){e-t.clientX,s-t.clientY})}$(document).ready(handleEvents);var Handler=function(){function n(t){_classCallCheck(this,n),this.selector=$(t),this.$imgWrap=$(".js-img-wrapper",this.selector),this.img=$("img",this.$imgWrap),this.maxHeight=1.5,this.minHeight=this.$imgWrap.height(),this.left=0,this.top=0,this.curPosX=0,this.curPosY=0,this.difX=0,this.difY=0,this.leftLim=0,this.topLim=0,$(document).ready(this.console()),this.hendlPointerEvents(this.selector)}return _createClass(n,[{key:"console",value:function(t){function n(){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){console.log("console"),console.log(this.selector),console.log(this.$imgWrap),console.log(this.height),console.log(this.maxHeight),console.log(this.minHeight)})},{key:"getLim",value:function(){console.log("getLim"),this.topLim=(this.img.height()-this.$imgWrap.height())/2,this.leftLim=(this.img.width()-this.$imgWrap.width())/2}},{key:"checkLim",value:function(){console.log("checkLim"),this.top>=this.topLim&&(this.top=this.topLim),this.top<=-this.topLim&&(this.top=-this.topLim),this.left>=this.leftLim&&(this.left=this.leftLim),this.left<=-this.leftLim&&(this.left=-this.leftLim)}},{key:"pointerMove",value:function(t){console.log("pointerMove"),this.left=t.clientX-this.curPosX,this.top=t.clientY-this.curPosY,this.checkLim(),this.img[0].style.left="calc(50% + "+this.left+"px)",this.img[0].style.top="calc(50% + "+this.top+"px)",console.log(t),console.log(this.curPosX),console.log(this.difX),console.log(this.difY)}},{key:"pointerDown",value:function(t){console.log("pointerDown"),this.curPosX=t.clientX,this.curPosY=t.clientY,this.getLim()}},{key:"hendlPointerEvents",value:function(t){var n=this;console.log("hendlPointerEvents"),t.on("pointermove",function(t){return n.pointerMove(t)}),t.on("pointerdown",function(t){return n.pointerDown(t)})}}]),n}();function template(t){var n='<div class="b-card mod-'+t.size+"  "+("critical"===t.type?"mod-attention":"")+' ">\n      <div class="b-card__head">\n        <header>\n          <i class="b-card__ico icon i-'+t.icon+'"></i>\n          <h3 class="b-card__title">'+t.title+'</h3>\n        </header>\n        <div class="b-card__info">\n          <span class="b-card__name">'+t.source+'</span>\n          <span class="b-card__time">'+t.time+"</span>\n        </div>\n      </div>\n      "+(t.description||t.data?dataMain(t):"")+'\n      <button class="b-card__close"><i class="b-card__ico icon i-close"></i>\n      </button>\n      <a href="#" class="b-card__link">\n        <i class="b-card__ico icon i-arrow-r"></i>\n      </a>\n    </div>';insertHtml($("#js-card-list"),$(n))}function dataMain(t){return'<div class="b-card__main">\n      '+(t.description?"<p class='b-card__text'>"+t.description+"</p>":"")+"\n      "+(t.data?dataTemplate(t.data):"")+"\n      </div>"}function dataTemplate(t){return(t.albumcover?dataMusic(t):"")+"\n  "+(t.temperature?dataWeather(t):"")+"\n  "+(t.buttons?dataButtons(t):"")+"\n  "+(t.image?dataImage(t):"")+"\n  "+("graph"===t.type?dataGraph(t):"")}function dataGraph(t){return'<div class="b-card__data">\n           <picture>\n            <source srcset="assets/img/Richdata.svg" type="image/svg+xml">\n            <img src="assets/img/Richdata@2x.png" alt="yandex">\n          </picture>\n          </div>'}function dataImage(t){return'<div class="b-card__data js-pointer-event">\n          <div class="b-cam">\n            <div class="b-cam__img">\n            <div class="b-cam__wrapper js-img-wrapper">\n            <img src="assets/img/card-1.png" alt="yandex"\n               srcset="assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w">\n               </div>\n               </div>\n            <div class="b-cam__stat mod-only-touch">\n              <span>Приближение: 78%</span>\n              <span>Яркость: 50%</span>\n            </div>\n            </div>\n           </div>'}function dataButtons(t){return'<div class="b-card__data">\n            <div class="b-card__btns">\n                '+t.buttons.map(function(t){return' <button class="b-btn '+("Да"===t?"mod-yellow":"")+'">'+t+"</button>"}).join("")+"\n            </div>\n          </div>"}function dataWeather(t){return'<div class="b-card__data">\n            <div class="b-data-set">\n              <div class="b-data-set__item">\n                <p class="b-data-set__name">\n                  Температура: <span class="b-data-set__val">'+t.temperature+' C</span>\n                </p>\n              </div>\n              <div class="b-data-set__item">\n                <p class="b-data-set__name">\n                  Влажность: <span class="b-data-set__val">'+t.humidity+"%</span>\n                </p>\n              </div>\n            </div>\n          </div>"}function dataMusic(t){return'<div class="b-card__data"> \n           <div class="b-music">\n            <div class="b-music__section">\n              <div class="b-music__logo">\n                <img src="'+t.albumcover+'" alt="'+t.artist+'">\n              </div>\n              <div class="b-music__info">\n                <p class="b-music__name">\n                 '+t.artist+" - "+t.track.name+'\n                </p>\n                <div class="b-music__duration">\n                  <input id=\'range-1\' type="range" name="volume"\n                         min="0" max="100"/>\n                  <label for="range-1">'+t.track.length+'</label>\n                </div>\n              </div>\n            </div>\n            <div class="b-music__section">\n              <div class="b-music__controls">\n                <button class="b-music__prev icon i-prev"></button>\n                <button class="b-music__next icon i-next"></button>\n                <div class="b-music__val">\n                  <input id=\'range-2\' type="range" name="volume"\n                         min="0" max="100" value="'+t.volume+'"/>\n                  <label for="range-2">'+t.volume+"%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>"}function insertHtml(t,n){t.append(n)}$.getJSON("assets/json/events.json").done(function(t){$.each(t.events,function(t,n){template(n)}),$(".js-pointer-event").each(function(t,n){new Handler(n)})});
//# sourceMappingURL=main.js.map
