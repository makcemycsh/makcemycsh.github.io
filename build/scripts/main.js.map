{"version":3,"sources":["main.js"],"names":["is_touch_device","window","$","scroll","this","scrollTop","document","ready","handleEvents","css","outerHeight","on","toggleClass","removeClass","body","addClass","Handler","selector","_classCallCheck","$imgWrap","$img","height","maxHeight","minHeight","parent","leftLim","left","curPosX","curPosY","undefined","console","difY","zoom","lastTap","hendlPointerEvents","log","img","topLim","width","top","e","clientX","clientY","checkLim","style","difX","now","Date","getTime","getLim","timesince","zoomImg","_this","pointerMove","pointerDown","template","card","size","type","event","icon","title","source","time","description","data","dataMain","insertHtml","item","dataTemplate","albumcover","dataMusic","dataWeather","dataImage","dataGraph","dataButtons","$parent","$content","btn","join","temperature","humidity","artist","track","name","length","volume","append","getJSON","done","each","events","i"],"mappings":"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","file":"main.js","sourcesContent":["function is_touch_device() {\n  return !!('ontouchstart' in window);\n}\n\n$(document).ready(handleEvents);\n\nfunction handleEvents() {\n  // Фиксация хедера при скролле\n  $(window).scroll(function () {\n    if ($(this).scrollTop() > 150) {\n      $('body').addClass('head-is-fixed');\n      $('.head-is-fixed').css('margin-top', $('.js-head').outerHeight(true));\n    } else {\n      $('.head-is-fixed').css('margin-top', 0);\n      $('body').removeClass('head-is-fixed');\n    }\n  });\n\n  //Выпадающее меню\n  $('.js-menu-bar').on('click', function () {\n    $(this).toggleClass('is-active');\n  });\n\n  // Проверяем тип устройства\n  if (is_touch_device()) $(document.body).addClass('is-touch');\n  else $(document.body).addClass('no-touch');\n}\n\nclass Handler {\n  constructor(selector) {\n    this.selector = $(selector);\n    this.$imgWrap = $('.js-img-wrapper', this.selector);\n    this.$img = $('img', this.$imgWrap);\n    this.height = this.$img.height();\n    this.maxHeight = 1.5;\n    this.minHeight = this.$imgWrap.parent().height();\n\n    this.left = 0;\n    this.top = 0;\n    this.curPosX = 0;\n    this.curPosY = 0;\n    this.difX = 0;\n    this.difY = 0;\n    this.leftLim = 0;\n    this.topLim = 0;\n\n    this.zoom = false;\n    this.lastTap = undefined;\n    $(document).ready(this.console());\n    this.hendlPointerEvents(this.selector);\n  }\n\n  console() {\n    console.log('console');\n    console.log(this.selector);\n    console.log(this.$imgWrap);\n    console.log(this.height);\n    console.log(this.maxHeight);\n    console.log(this.minHeight);\n  }\n\n  zoomImg() {\n    console.log('zoom');\n    this.height = this.img.height();\n    console.log(this.maxHeight);\n    console.log(this.minHeight);\n    console.log(this.height);\n    if (this.zoom) {\n      // this.$imgWrap.height(this.maxHeight);\n    } else {\n      this.height = this.$img.height();\n      this.maxHeight = 1.5 * this.height;\n      this.$imgWrap.height(this.maxHeight);\n      this.getLim();\n      this.zoom = !this.zoom;\n    }\n  }\n\n  getLim() {\n    console.log('getLim');\n    this.topLim = (this.$imgWrap.height() - this.$imgWrap.parent().height()) / 2;\n    this.leftLim = (this.$imgWrap.width() - this.$imgWrap.parent().width()) / 2;\n  }\n\n  checkLim() {\n    console.log('checkLim');\n    this.top >= this.topLim ? this.top = this.topLim : '';\n    this.top <= -this.topLim ? this.top = -this.topLim : '';\n\n    this.left >= this.leftLim ? this.left = this.leftLim : '';\n    this.left <= -this.leftLim ? this.left = -this.leftLim : '';\n\n  }\n\n  pointerMove(e) {\n    console.log('pointerMove');\n\n    // this.difX = this.curPosX.toFixed(0) - e.clientX.toFixed(0);\n    // this.difY = this.curPosY.toFixed(0) - e.clientY.toFixed(0);\n    // if (this.difX !== 0) this.difX >= 0 ? this.left += 1 : this.left -= 1;\n    // if (this.difY !== 0) this.difY >= 0 ? this.top += 1 : this.top -= 1;\n\n    // this.curPosX = e.clientX;\n    // this.curPosY = e.clientY;\n    this.left = e.clientX - this.curPosX;\n    this.top = e.clientY - this.curPosY;\n    this.checkLim();\n    console.log(this.left);\n    console.log(this.top);\n    this.$imgWrap[0].style.left = 'calc(50% + ' + this.left + 'px)';\n    this.$imgWrap[0].style.top = 'calc(50% + ' + this.top + 'px)';\n\n\n    console.log(e);\n    console.log(this.curPosX);\n    console.log(this.difX);\n    console.log(this.difY);\n  }\n\n  pointerDown(e) {\n    console.log('pointerDown');\n    let now = new Date().getTime();\n    this.curPosX = e.clientX;\n    this.curPosY = e.clientY;\n    this.getLim();\n\n    let timesince = now - this.lastTap;\n    if ((timesince < 500) && (timesince > 0)) this.zoomImg();\n    this.lastTap = new Date().getTime();\n  }\n\n  hendlPointerEvents(selector) {\n    console.log('hendlPointerEvents');\n    selector.on('pointermove', e => this.pointerMove(e));\n    selector.on('pointerdown', e => this.pointerDown(e));\n  }\n}\n\n\n$.getJSON(\"assets/json/events.json\").done(function (data) {\n  $.each(data.events, function (i, item) {\n    template(item);\n  });\n  $('.js-pointer-event').each(function (i, e) {\n    new Handler(e);\n  })\n});\n\nfunction template(event) {\n  let card = `<div class=\"b-card mod-${event.size}  ${event.type === 'critical' ? `mod-attention` : ''} \">\n      <div class=\"b-card__head\">\n        <header>\n          <i class=\"b-card__ico icon i-${event.icon}\"></i>\n          <h3 class=\"b-card__title\">${event.title}</h3>\n        </header>\n        <div class=\"b-card__info\">\n          <span class=\"b-card__name\">${event.source}</span>\n          <span class=\"b-card__time\">${event.time}</span>\n        </div>\n      </div>\n      ${event.description || event.data ? dataMain(event) : ''}\n      <button class=\"b-card__close\"><i class=\"b-card__ico icon i-close\"></i>\n      </button>\n      <a href=\"#\" class=\"b-card__link\">\n        <i class=\"b-card__ico icon i-arrow-r\"></i>\n      </a>\n    </div>`;\n  insertHtml($('#js-card-list'), $(card));\n}\n\nfunction dataMain(data) {\n  return `<div class=\"b-card__main\">\n      ${data.description ? `<p class='b-card__text'>${data.description}</p>` : ''}\n      ${data.data ? dataTemplate(data.data) : ''}\n      </div>`;\n}\n\nfunction dataTemplate(data) {\n  return `${data.albumcover ? dataMusic(data) : ''}\n  ${data.temperature ? dataWeather(data) : ''}\n  ${data.buttons ? dataButtons(data) : ''}\n  ${data.image ? dataImage(data) : ''}\n  ${data.type === 'graph' ? dataGraph(data) : ''}`;\n}\n\nfunction dataGraph(data) {\n  return `<div class=\"b-card__data\">\n           <picture>\n            <source srcset=\"assets/img/Richdata.svg\" type=\"image/svg+xml\">\n            <img src=\"assets/img/Richdata@2x.png\" alt=\"yandex\">\n          </picture>\n          </div>`\n}\n\nfunction dataImage(data) {\n  return `<div class=\"b-card__data js-pointer-event\">\n          <div class=\"b-cam\">\n            <div class=\"b-cam__img\">\n            <div class=\"b-cam__wrapper js-img-wrapper\">\n            <img src=\"assets/img/card-1.png\" alt=\"yandex\"\n               srcset=\"assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w\">\n               </div>\n               </div>\n            <div class=\"b-cam__stat mod-only-touch\">\n              <span>Приближение: 78%</span>\n              <span>Яркость: 50%</span>\n            </div>\n            </div>\n           </div>`\n}\n\nfunction dataButtons(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-card__btns\">\n                ${data.buttons.map(btn => ` <button class=\"b-btn ${btn === 'Да' ? `mod-yellow` : '' }\">${btn}</button>`).join('')}\n            </div>\n          </div>`;\n}\n\nfunction dataWeather(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-data-set\">\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Температура: <span class=\"b-data-set__val\">${data.temperature} C</span>\n                </p>\n              </div>\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Влажность: <span class=\"b-data-set__val\">${data.humidity}%</span>\n                </p>\n              </div>\n            </div>\n          </div>`;\n}\n\nfunction dataMusic(data) {\n  return `<div class=\"b-card__data\"> \n           <div class=\"b-music\">\n            <div class=\"b-music__section\">\n              <div class=\"b-music__logo\">\n                <img src=\"${data.albumcover}\" alt=\"${data.artist}\">\n              </div>\n              <div class=\"b-music__info\">\n                <p class=\"b-music__name\">\n                 ${data.artist} - ${data.track.name}\n                </p>\n                <div class=\"b-music__duration\">\n                  <input id='range-1' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\"/>\n                  <label for=\"range-1\">${data.track.length}</label>\n                </div>\n              </div>\n            </div>\n            <div class=\"b-music__section\">\n              <div class=\"b-music__controls\">\n                <button class=\"b-music__prev icon i-prev\"></button>\n                <button class=\"b-music__next icon i-next\"></button>\n                <div class=\"b-music__val\">\n                  <input id='range-2' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\" value=\"${data.volume}\"/>\n                  <label for=\"range-2\">${data.volume}%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>`;\n}\n\nfunction insertHtml($parent, $content) {\n  $parent.append($content);\n}\n"],"sourceRoot":"/source/"}