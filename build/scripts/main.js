"use strict";var _createClass=function(){function s(t,i){for(var n=0;n<i.length;n++){var s=i[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,n){return i&&s(t.prototype,i),n&&s(t,n),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function is_touch_device(){return!!("ontouchstart"in window)}function handleEvents(){$(window).scroll(function(){150<$(this).scrollTop()?($("body").addClass("head-is-fixed"),$(".head-is-fixed").css("margin-top",$(".js-head").outerHeight(!0))):($(".head-is-fixed").css("margin-top",0),$("body").removeClass("head-is-fixed"))}),$(".js-menu-bar").on("click",function(){$(this).toggleClass("is-active")}),is_touch_device()?$(document.body).addClass("is-touch"):$(document.body).addClass("no-touch")}$(document).ready(handleEvents);var Handler=function(){function i(t){_classCallCheck(this,i),this.selector=$(t),this.$imgWrap=$(".js-img-wrapper",this.selector),this.$img=$("img",this.$imgWrap),this.height=this.$img.height(),this.maxHeight=1.5,this.minHeight=this.$imgWrap.parent().height(),this.left=0,this.top=0,this.curPosX=0,this.curPosY=0,this.difX=0,this.difY=0,this.leftLim=0,this.topLim=0,this.events=[],this.distance=0,this.zoom=!1,this.lastTap=void 0,$(document).ready(this.console()),this.hendlPointerEvents(this.selector)}return _createClass(i,[{key:"console",value:function(t){function i(){return t.apply(this,arguments)}return i.toString=function(){return t.toString()},i}(function(){console.log("console"),console.log(this.selector),console.log(this.$imgWrap),console.log(this.height),console.log(this.maxHeight),console.log(this.minHeight)})},{key:"zoomImg",value:function(){this.zoom?(console.log("123"),console.log(this.height),this.$img.height(this.height)):(this.height=this.$img.height(),this.maxHeight=2*this.height,this.$img.height(this.maxHeight),this.getLim()),this.zoom=!this.zoom}},{key:"getLim",value:function(){console.log("getLim"),this.topLim=(this.$imgWrap.height()-this.$imgWrap.parent().height())/2,this.leftLim=(this.$imgWrap.width()-this.$imgWrap.parent().width())/2}},{key:"checkLim",value:function(){console.log("checkLim"),this.top>=this.topLim&&(this.top=this.topLim),this.top<=-this.topLim&&(this.top=-this.topLim),this.left>=this.leftLim&&(this.left=this.leftLim),this.left<=-this.leftLim&&(this.left=-this.leftLim)}},{key:"pointerMove",value:function(t){if(console.log("pointerMove"),this.left=t.clientX-this.curPosX,this.top=t.clientY-this.curPosY,this.checkLim(),this.$img.css("transform","translate("+this.left+"px, "+this.top+"px)"),2===this.events.length){var i=this.events[0].clientX,n=this.events[0].clientY,s=this.events[1].clientX,e=this.events[1].clientY,a=this.getDistance(i,n,s,e);if(a!==this.distance){var o=a-this.distance;this.$img.height(this.$img.height+o),this.getLim()}}}},{key:"getDistance",value:function(t,i,n,s){return Math.sqrt(Math.pow(n-t,2)+Math.pow(s-i,2))}},{key:"pointerDown",value:function(t){console.log("pointerDown");var i=(new Date).getTime();this.curPosX=t.clientX,this.curPosY=t.clientY,this.getLim();var n=i-this.lastTap;n<500&&0<n&&this.zoomImg(),this.lastTap=(new Date).getTime(),console.log(t.originalEvent),this.events.push(t.originalEvent),console.log(this.events)}},{key:"pointerUp",value:function(i){this.events=this.events.filter(function(t){return t.pointerId!==i.originalEvent.pointerId})}},{key:"hendlPointerEvents",value:function(t){var i=this;console.log("hendlPointerEvents"),is_touch_device()&&(t.on("pointermove",function(t){return i.pointerMove(t)}),t.on("pointerdown",function(t){return i.pointerDown(t)}),t.on("pointerup",function(t){return i.pointerUp(t)}))}}]),i}();function template(t){var i='<div class="b-card mod-'+t.size+"  "+("critical"===t.type?"mod-attention":"")+' ">\n      <div class="b-card__head">\n        <header>\n          <i class="b-card__ico icon i-'+t.icon+'"></i>\n          <h3 class="b-card__title">'+t.title+'</h3>\n        </header>\n        <div class="b-card__info">\n          <span class="b-card__name">'+t.source+'</span>\n          <span class="b-card__time">'+t.time+"</span>\n        </div>\n      </div>\n      "+(t.description||t.data?dataMain(t):"")+'\n      <button class="b-card__close"><i class="b-card__ico icon i-close"></i>\n      </button>\n      <a href="#" class="b-card__link">\n        <i class="b-card__ico icon i-arrow-r"></i>\n      </a>\n    </div>';insertHtml($("#js-card-list"),$(i))}function dataMain(t){return'<div class="b-card__main">\n      '+(t.description?"<p class='b-card__text'>"+t.description+"</p>":"")+"\n      "+(t.data?dataTemplate(t.data):"")+"\n      </div>"}function dataTemplate(t){return(t.albumcover?dataMusic(t):"")+"\n  "+(t.temperature?dataWeather(t):"")+"\n  "+(t.buttons?dataButtons(t):"")+"\n  "+(t.image?dataImage(t):"")+"\n  "+("graph"===t.type?dataGraph(t):"")}function dataGraph(t){return'<div class="b-card__data">\n           <picture>\n            <source srcset="assets/img/Richdata.svg" type="image/svg+xml">\n            <img src="assets/img/Richdata@2x.png" alt="yandex">\n          </picture>\n          </div>'}function dataImage(t){return'<div class="b-card__data js-pointer-event">\n          <div class="b-cam">\n            <div class="b-cam__img">\n            <div class="b-cam__wrapper js-img-wrapper">\n            <img src="assets/img/card-1.png" alt="yandex"\n               srcset="assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w">\n               </div>\n               </div>\n            <div class="b-cam__stat mod-only-touch">\n              <span>Приближение: <span class="js-zoom">78</span>%</span>\n              <span>Яркость: <span class="brightness">50</span>%</span>\n            </div>\n            </div>\n           </div>'}function dataButtons(t){return'<div class="b-card__data">\n            <div class="b-card__btns">\n                '+t.buttons.map(function(t){return' <button class="b-btn '+("Да"===t?"mod-yellow":"")+'">'+t+"</button>"}).join("")+"\n            </div>\n          </div>"}function dataWeather(t){return'<div class="b-card__data">\n            <div class="b-data-set">\n              <div class="b-data-set__item">\n                <p class="b-data-set__name">\n                  Температура: <span class="b-data-set__val">'+t.temperature+' C</span>\n                </p>\n              </div>\n              <div class="b-data-set__item">\n                <p class="b-data-set__name">\n                  Влажность: <span class="b-data-set__val">'+t.humidity+"%</span>\n                </p>\n              </div>\n            </div>\n          </div>"}function dataMusic(t){return'<div class="b-card__data"> \n           <div class="b-music">\n            <div class="b-music__section">\n              <div class="b-music__logo">\n                <img src="'+t.albumcover+'" alt="'+t.artist+'">\n              </div>\n              <div class="b-music__info">\n                <p class="b-music__name">\n                 '+t.artist+" - "+t.track.name+'\n                </p>\n                <div class="b-music__duration">\n                  <input id=\'range-1\' type="range" name="volume"\n                         min="0" max="100"/>\n                  <label for="range-1">'+t.track.length+'</label>\n                </div>\n              </div>\n            </div>\n            <div class="b-music__section">\n              <div class="b-music__controls">\n                <button class="b-music__prev icon i-prev"></button>\n                <button class="b-music__next icon i-next"></button>\n                <div class="b-music__val">\n                  <input id=\'range-2\' type="range" name="volume"\n                         min="0" max="100" value="'+t.volume+'"/>\n                  <label for="range-2">'+t.volume+"%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>"}function insertHtml(t,i){t.append(i)}$.getJSON("assets/json/events.json").done(function(t){$.each(t.events,function(t,i){template(i)}),$(".js-pointer-event").each(function(t,i){new Handler(i)})});
//# sourceMappingURL=main.js.map
