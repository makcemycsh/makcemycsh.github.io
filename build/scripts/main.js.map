{"version":3,"sources":["main.js"],"names":["is_touch_device","window","$","scroll","this","scrollTop","document","ready","handleEvents","css","outerHeight","on","toggleClass","removeClass","body","addClass","$imgWrap","curPosX","minImgHeight","curPosY","difX","difY","e","pointerId","imgHeight","offsetHeight","parent","offsetX","offsetY","timesince","Date","getTime","lastTap","zoom","log","clientX","clientY","Handler","_classCallCheck","img","selector","maxHeight","minHeight","left","height","leftLim","topLim","hendlPointerEvents","console","width","top","toFixed","checkLim","getLim","_this","pointerMove","pointerDown","event","size","type","icon","title","source","time","description","data","dataMain","insertHtml","card","template","dataTemplate","albumcover","dataMusic","buttons","image","dataImage","dataGraph","dataButtons","map","btn","join","dataWeather","temperature","humidity","artist","track","name","length","volume","$parent","$content","append","getJSON","done","each","i","item"],"mappings":"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","file":"main.js","sourcesContent":["function is_touch_device() {\n  return !!('ontouchstart' in window);\n}\n\n$(document).ready(handleEvents);\n\nfunction handleEvents() {\n  // Фиксация хедера при скролле\n  $(window).scroll(function () {\n    if ($(this).scrollTop() > 150) {\n      $('body').addClass('head-is-fixed');\n      $('.head-is-fixed').css('margin-top', $('.js-head').outerHeight(true));\n    } else {\n      $('.head-is-fixed').css('margin-top', 0);\n      $('body').removeClass('head-is-fixed');\n    }\n  });\n\n  //Выпадающее меню\n  $('.js-menu-bar').on('click', function () {\n    $(this).toggleClass('is-active');\n  });\n\n  // Проверяем тип устройства\n  if (is_touch_device()) $(document.body).addClass('is-touch');\n  else $(document.body).addClass('no-touch');\n\n\n  let $imgWrap = $('.js-img-wrapper');\n  // let $pointerContainer = $('.js-pointer-event');\n  let minImgHeight;\n  let maxImgHeight;\n  let imgHeight;\n  let curPosX;\n  let curPosY;\n  let difX;\n  let difY;\n  let lastTap;\n  let zoom = false;\n  let $debag = $('.js-debag');\n  $(document.body).on('pointerout', '.js-pointer-event', function (e) {\n  });\n  $(document.body).on('pointerleave', '.js-pointer-event', function (e) {\n  });\n  $(document.body).on('pointerover', '.js-pointer-event', function (e) {\n  });\n  $(document.body).on('pointerenter', '.js-pointer-event', function (e) {\n    $debag.append('<p>pointer.id: ' + e.pointerId + '</p>');\n\n\n    imgHeight = $($imgWrap, $(this))[0].offsetHeight;\n    maxImgHeight = 1.5 * +imgHeight;\n    minImgHeight = $imgWrap.parent()[0].offsetHeight;\n  });\n  $(document.body).on('pointerdown', '.js-pointer-event', function (e) {\n    curPosX = e.offsetX;\n    curPosY = e.offsetY;\n\n    let now = new Date().getTime();\n    let timesince = now - lastTap;\n    if ((timesince < 600) && (timesince > 0)) {\n      if (zoom) {\n        zoom = !zoom;\n      }\n      else {\n        // $($imgWrap, $(this)).height(maxImgHeight);\n        console.log('double');\n        zoom = !zoom;\n      }\n\n\n    } else {\n      console.log('none');\n    }\n\n    lastTap = new Date().getTime();\n  });\n  $(document.body).on('pointerup', '.js-pointer-event', function (e) {\n    // console.log(e.offsetX);\n    // console.log('pointerup');\n    // console.log($($imgWrap, $(this))[0].offsetHeight);\n  });\n  $(document.body).on('pointermove', '.js-pointer-event', function (e) {\n    difX = curPosX - e.clientX;\n    difY = curPosY - e.clientY;\n    // $(this).css('transform', 'translateX('+ difX +'px)');\n    // $('img', $imgWrap).css({\n    //   'margin-left': difX,\n    //   'margin-top': difY\n    // });\n\n  });\n}\n\nclass Handler {\n  constructor(selector) {\n    this.selector = $(selector);\n    this.$imgWrap = $('.js-img-wrapper', this.selector);\n    this.img = $('img', this.$imgWrap);\n    this.maxHeight = 1.5;\n    this.minHeight = this.$imgWrap.height();\n\n    this.left = 0;\n    this.top = 0;\n    this.curPosX = 0;\n    this.curPosY = 0;\n    this.difX = 0;\n    this.difY = 0;\n    this.leftLim = 0;\n    this.topLim = 0;\n    $(document).ready(this.console());\n    this.hendlPointerEvents(this.selector);\n  }\n\n  console() {\n    console.log('console');\n    console.log(this.selector);\n    console.log(this.$imgWrap);\n    console.log(this.height);\n    console.log(this.maxHeight);\n    console.log(this.minHeight);\n  }\n\n  getLim() {\n    console.log('getLim');\n    this.topLim = (this.img.height() - this.$imgWrap.height()) / 2;\n    this.leftLim = (this.img.width() - this.$imgWrap.width()) / 2;\n  }\n\n  checkLim() {\n    console.log('checkLim');\n    this.top >= this.topLim ? this.top = this.topLim : '';\n    this.top <= -this.topLim ? this.top = -this.topLim : '';\n\n    this.left >= this.leftLim ? this.left = this.leftLim : '';\n    this.left <= -this.leftLim ? this.left = -this.leftLim : '';\n\n  }\n\n  pointerMove(e) {\n    console.log('pointerMove');\n\n    this.difX = this.curPosX.toFixed(0) - e.clientX.toFixed(0);\n    this.difY = this.curPosY.toFixed(0) - e.clientY.toFixed(0);\n    if (this.difX !== 0) this.difX >= 0 ? this.left += 5 : this.left -= 5;\n    if (this.difY !== 0) this.difY >= 0 ? this.top += 5 : this.top -= 5;\n\n    this.curPosX = e.clientX;\n    this.curPosY = e.clientY;\n\n    this.checkLim();\n    this.img.css({\n      'top': 'calc(50% + ' + this.top + 'px)',\n      'left': 'calc(50% + ' + this.left + 'px)'\n    });\n\n    console.log(e);\n    console.log(this.curPosX);\n    console.log(this.difX);\n    console.log(this.difY);\n  }\n\n  pointerDown(e) {\n    console.log('pointerDown');\n    this.curPosX = e.clientX;\n    this.curPosY = e.clientY;\n    this.getLim();\n  }\n\n  hendlPointerEvents(selector) {\n    console.log('hendlPointerEvents');\n    selector.on('pointermove', e => this.pointerMove(e));\n    selector.on('pointerdown', e => this.pointerDown(e));\n  }\n}\n\n\n$.getJSON(\"assets/json/events.json\").done(function (data) {\n  $.each(data.events, function (i, item) {\n    template(item);\n  });\n  $('.js-pointer-event').each(function (i, e) {\n    new Handler(e);\n  })\n});\n\nfunction template(event) {\n  let card = `<div class=\"b-card mod-${event.size}  ${event.type === 'critical' ? `mod-attention` : ''} \">\n      <div class=\"b-card__head\">\n        <header>\n          <i class=\"b-card__ico icon i-${event.icon}\"></i>\n          <h3 class=\"b-card__title\">${event.title}</h3>\n        </header>\n        <div class=\"b-card__info\">\n          <span class=\"b-card__name\">${event.source}</span>\n          <span class=\"b-card__time\">${event.time}</span>\n        </div>\n      </div>\n      ${event.description || event.data ? dataMain(event) : ''}\n      <button class=\"b-card__close\"><i class=\"b-card__ico icon i-close\"></i>\n      </button>\n      <a href=\"#\" class=\"b-card__link\">\n        <i class=\"b-card__ico icon i-arrow-r\"></i>\n      </a>\n    </div>`;\n  insertHtml($('#js-card-list'), $(card));\n}\n\nfunction dataMain(data) {\n  return `<div class=\"b-card__main\">\n      ${data.description ? `<p class='b-card__text'>${data.description}</p>` : ''}\n      ${data.data ? dataTemplate(data.data) : ''}\n      </div>`;\n}\n\nfunction dataTemplate(data) {\n  return `${data.albumcover ? dataMusic(data) : ''}\n  ${data.temperature ? dataWeather(data) : ''}\n  ${data.buttons ? dataButtons(data) : ''}\n  ${data.image ? dataImage(data) : ''}\n  ${data.type === 'graph' ? dataGraph(data) : ''}`;\n}\n\nfunction dataGraph(data) {\n  return `<div class=\"b-card__data\">\n           <picture>\n            <source srcset=\"assets/img/Richdata.svg\" type=\"image/svg+xml\">\n            <img src=\"assets/img/Richdata@2x.png\" alt=\"yandex\">\n          </picture>\n          </div>`\n}\n\nfunction dataImage(data) {\n  return `<div class=\"b-card__data js-pointer-event\">\n          <div class=\"b-cam\">\n            <div class=\"b-cam__img\">\n            <div class=\"b-cam__wrapper js-img-wrapper\">\n            <img src=\"assets/img/card-1.png\" alt=\"yandex\"\n               srcset=\"assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w\">\n               </div>\n               </div>\n            <div class=\"b-cam__stat mod-only-touch\">\n              <span>Приближение: 78%</span>\n              <span>Яркость: 50%</span>\n            </div>\n            </div>\n           </div>`\n}\n\nfunction dataButtons(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-card__btns\">\n                ${data.buttons.map(btn => ` <button class=\"b-btn ${btn === 'Да' ? `mod-yellow` : '' }\">${btn}</button>`).join('')}\n            </div>\n          </div>`;\n}\n\nfunction dataWeather(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-data-set\">\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Температура: <span class=\"b-data-set__val\">${data.temperature} C</span>\n                </p>\n              </div>\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Влажность: <span class=\"b-data-set__val\">${data.humidity}%</span>\n                </p>\n              </div>\n            </div>\n          </div>`;\n}\n\nfunction dataMusic(data) {\n  return `<div class=\"b-card__data\"> \n           <div class=\"b-music\">\n            <div class=\"b-music__section\">\n              <div class=\"b-music__logo\">\n                <img src=\"${data.albumcover}\" alt=\"${data.artist}\">\n              </div>\n              <div class=\"b-music__info\">\n                <p class=\"b-music__name\">\n                 ${data.artist} - ${data.track.name}\n                </p>\n                <div class=\"b-music__duration\">\n                  <input id='range-1' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\"/>\n                  <label for=\"range-1\">${data.track.length}</label>\n                </div>\n              </div>\n            </div>\n            <div class=\"b-music__section\">\n              <div class=\"b-music__controls\">\n                <button class=\"b-music__prev icon i-prev\"></button>\n                <button class=\"b-music__next icon i-next\"></button>\n                <div class=\"b-music__val\">\n                  <input id='range-2' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\" value=\"${data.volume}\"/>\n                  <label for=\"range-2\">${data.volume}%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>`;\n}\n\nfunction insertHtml($parent, $content) {\n  $parent.append($content);\n}\n"],"sourceRoot":"/source/"}