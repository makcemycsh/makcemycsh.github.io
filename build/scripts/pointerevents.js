"use strict";var _createClass=function(){function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function is_touch_device(){return!!("ontouchstart"in window)}is_touch_device()?$(document.body).addClass("is-touch"):$(document.body).addClass("no-touch");var Handler=function(){function i(t){_classCallCheck(this,i),this.selector=$(t),this.$imgWrap=$(".js-img-wrapper",this.selector),this.$img=$("img",this.$imgWrap),this.$scroll=$(".js-scroll",this.selector),this.height=this.$img.height(),this.minHeight=this.$imgWrap.parent().height(),this.left=0,this.top=0,this.oldLeft=0,this.oldTop=0,this.curPosX=0,this.curPosY=0,this.difX=0,this.difY=0,this.leftLim=0,this.topLim=0,this.events=[],this.distance=0,this.zoom=!1,this.lastTap=void 0,this.hendlPointerEvents(this.selector)}return _createClass(i,[{key:"zoomImg",value:function(){this.zoom?this.$img.height(this.height):(this.height=this.$img.height(),this.maxHeight=2*this.height,this.$img.height(this.maxHeight),this.getLim()),this.zoom=!this.zoom}},{key:"getLim",value:function(){this.topLim=(this.$imgWrap.height()-this.$imgWrap.parent().height())/2,this.leftLim=(this.$imgWrap.width()-this.$imgWrap.parent().width())/2}},{key:"checkLim",value:function(){this.top>=this.topLim&&(this.top=this.topLim),this.top<=-this.topLim&&(this.top=-this.topLim),this.left>=this.leftLim&&(this.left=this.leftLim),this.left<=-this.leftLim&&(this.left=-this.leftLim)}},{key:"pointerMove",value:function(t){if(2===this.events.length){console.log(t.identifier),$(".js-debag").append("<div>"+this.events+"</div>");var i=void 0,e=void 0,s=void 0,n=void 0;t.originalEvent.pointerId===this.events[0]?(i=t.clientX,e=t.clientY):t.originalEvent.pointerId===this.events[1]&&(s=t.clientX,n=t.clientY),$(".js-debag").append("<div>"+i+" "+e+" "+s+" "+n+"</div>");var o=this.getDistance(i,e,s,n);$(".js-debag").append("<div>"+o+"</div>")}else this.left+=t.clientX-this.oldLeft,this.top+=t.clientY-this.oldTop,this.checkLim(),this.$img.css("transform","translate("+this.left+"px, "+this.top+"px)"),this.$scroll.css("left",this.moveScroll()+"%"),this.oldLeft=t.clientX,this.oldTop=t.clientY}},{key:"getDistance",value:function(t,i,e,s){return Math.sqrt(Math.pow(e-t,2)+Math.pow(s-i,2))}},{key:"moveScroll",value:function(){var t=100*(this.left+this.leftLim)/(2*this.leftLim);return 85<(t=.7*t+15)&&(t=85),t<15&&(t=15),t}},{key:"pointerDown",value:function(t){console.log(t),console.log("pointerDown");var i=(new Date).getTime();this.curPosX=t.clientX,this.curPosY=t.clientY,this.oldLeft=t.clientX,this.oldTop=t.clientY,this.getLim();var e=i-this.lastTap;e<300&&0<e&&this.zoomImg(),this.lastTap=(new Date).getTime(),console.log(t.originalEvent),this.events.push(t.originalEvent.pointerId),console.log(this.events)}},{key:"pointerUp",value:function(i){this.events=this.events.filter(function(t){return t!==i.originalEvent.pointerId})}},{key:"hendlPointerEvents",value:function(t){var i=this;console.log("hendlPointerEvents"),is_touch_device()&&(t.on("pointermove",function(t){return i.pointerMove(t)}),t.on("pointerdown",function(t){return i.pointerDown(t)}),t.on("pointerup",function(t){return i.pointerUp(t)}))}}]),i}();
//# sourceMappingURL=pointerevents.js.map
