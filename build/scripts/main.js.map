{"version":3,"sources":["main.js"],"names":["$","document","window","handleEvents","this","scrollTop","scroll","css","outerHeight","removeClass","on","toggleClass","is_touch_device","body","addClass","$imgWrap","minImgHeight","maxImgHeight","imgHeight","curPosX","curPosY","difX","difY","lastTap","zoom","$debag","e","console","log","offsetX","html","append","pointerId","offsetHeight","parent","offsetY","timesince","now","getTime","clientY","margin-top","data","template","dataMain","card","event","size","description","icon","title","source","time","dataImage","insertHtml","dataWeather","dataTemplate","$content","$parent","buttons","dataButtons","image","type","dataGraph","map","btn","join","temperature","humidity","dataMusic","albumcover","artist","track","name","length","volume","ready","getJSON","done","each","i","item"],"mappings":"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","file":"main.js","sourcesContent":["$(document).ready(handleEvents);\n\nfunction handleEvents() {\n  // Фиксация хедера при скролле\n  $(window).scroll(function () {\n    if ($(this).scrollTop() > 150) {\n      $('body').addClass('head-is-fixed');\n      $('.head-is-fixed').css('margin-top', $('.js-head').outerHeight(true));\n    } else {\n      $('.head-is-fixed').css('margin-top', 0);\n      $('body').removeClass('head-is-fixed');\n    }\n  });\n\n  //Выпадающее меню\n  $('.js-menu-bar').on('click', function () {\n    $(this).toggleClass('is-active');\n  });\n\n  // Проверяем тип устройства\n  if (is_touch_device()) $(document.body).addClass('is-touch');\n  else $(document.body).addClass('no-touch');\n\n\n  let $imgWrap = $('.js-img-wrapper');\n  // let $pointerContainer = $('.js-pointer-event');\n  let minImgHeight;\n  let maxImgHeight;\n  let imgHeight;\n  let curPosX;\n  let curPosY;\n  let difX;\n  let difY;\n  let lastTap;\n  let zoom = false;\n  let $debag = $('.js-debag');\n  $(document.body).on('pointerout', '.js-pointer-event', function (e) {\n    console.log('pointerout');\n  });\n  $(document.body).on('pointerleave', '.js-pointer-event', function (e) {\n    console.log('pointerleave');\n  });\n  $(document.body).on('pointerover', '.js-pointer-event', function (e) {\n    console.log(e.offsetX);\n    console.log('pointerover');\n  });\n  $(document.body).on('pointerenter', '.js-pointer-event', function (e) {\n    console.log(e);\n    console.log('pointerenter');\n    $debag.html('pointerenter');\n    $debag.append('<p>pointer.id: ' + e.pointerId + '</p>');\n\n\n    imgHeight = $($imgWrap, $(this))[0].offsetHeight;\n    maxImgHeight = 1.5 * +imgHeight;\n    minImgHeight = $imgWrap.parent()[0].offsetHeight;\n  });\n  $(document.body).on('pointerdown', '.js-pointer-event', function (e) {\n    curPosX = e.offsetX;\n    curPosY = e.offsetY;\n\n    let now = new Date().getTime();\n    let timesince = now - lastTap;\n    if ((timesince < 600) && (timesince > 0)) {\n      if (zoom) {\n        zoom = !zoom;\n      }\n      else {\n        // $($imgWrap, $(this)).height(maxImgHeight);\n        console.log('double');\n        zoom = !zoom;\n      }\n\n\n    } else {\n      console.log('none');\n    }\n\n    lastTap = new Date().getTime();\n    console.log('pointerdown');\n  });\n  $(document.body).on('pointerup', '.js-pointer-event', function (e) {\n    console.log(imgHeight);\n    console.log(maxImgHeight);\n    console.log(minImgHeight);\n    // console.log(e.offsetX);\n    // console.log('pointerup');\n    // console.log($($imgWrap, $(this))[0].offsetHeight);\n  });\n  $(document.body).on('pointermove', '.js-pointer-event', function (e) {\n    console.log(e);\n    console.log('pointermove');\n    difX = curPosX - e.offsetX;\n    console.log(difX);\n    difX = curPosX - e.clientX;\n    console.log(difX);\n    difY = curPosY - e.clientY;\n    // $(this).css('transform', 'translateX('+ difX +'px)');\n    $('img', $imgWrap).css({\n      'margin-left': difX,\n      'margin-top': difY\n    });\n    console.log('difX: ' + difX);\n    $debag.append('<p>difX: ' + difX +'</p>');\n\n  });\n}\n\nfunction is_touch_device() {\n  return !!('ontouchstart' in window);\n}\n\n$.getJSON(\"assets/json/events.json\").done(function (data) {\n  $.each(data.events, function (i, item) {\n    template(item);\n  })\n});\n\nfunction template(event) {\n  let card = `<div class=\"b-card mod-${event.size}  ${event.type === 'critical' ? `mod-attention` : ''} \">\n      <div class=\"b-card__head\">\n        <header>\n          <i class=\"b-card__ico icon i-${event.icon}\"></i>\n          <h3 class=\"b-card__title\">${event.title}</h3>\n        </header>\n        <div class=\"b-card__info\">\n          <span class=\"b-card__name\">${event.source}</span>\n          <span class=\"b-card__time\">${event.time}</span>\n        </div>\n      </div>\n      ${event.description || event.data ? dataMain(event) : ''}\n      <button class=\"b-card__close\"><i class=\"b-card__ico icon i-close\"></i>\n      </button>\n      <a href=\"#\" class=\"b-card__link\">\n        <i class=\"b-card__ico icon i-arrow-r\"></i>\n      </a>\n    </div>`;\n  insertHtml($('#js-card-list'), $(card));\n}\n\nfunction dataMain(data) {\n  return `<div class=\"b-card__main\">\n      ${data.description ? `<p class='b-card__text'>${data.description}</p>` : ''}\n      ${data.data ? dataTemplate(data.data) : ''}\n      </div>`;\n}\n\nfunction dataTemplate(data) {\n  return `${data.albumcover ? dataMusic(data) : ''}\n  ${data.temperature ? dataWeather(data) : ''}\n  ${data.buttons ? dataButtons(data) : ''}\n  ${data.image ? dataImage(data) : ''}\n  ${data.type === 'graph' ? dataGraph(data) : ''}`;\n}\n\nfunction dataGraph(data) {\n  return `<div class=\"b-card__data\">\n           <picture>\n            <source srcset=\"assets/img/Richdata.svg\" type=\"image/svg+xml\">\n            <img src=\"assets/img/Richdata@2x.png\" alt=\"yandex\">\n          </picture>\n          </div>`\n}\n\nfunction dataImage(data) {\n  return `<div class=\"b-card__data js-pointer-event\">\n          <div class=\"b-cam\">\n            <div class=\"b-cam__img\">\n            <div class=\"b-cam__wrapper js-img-wrapper\">\n            <img src=\"assets/img/card-1.png\" alt=\"yandex\"\n               srcset=\"assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w\">\n               </div>\n               </div>\n            <div class=\"b-cam__stat mod-only-touch\">\n              <span>Приближение: 78%</span>\n              <span>Яркость: 50%</span>\n            </div>\n            </div>\n           </div>`\n}\n\nfunction dataButtons(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-card__btns\">\n                ${data.buttons.map(btn => ` <button class=\"b-btn ${btn === 'Да' ? `mod-yellow` : '' }\">${btn}</button>`).join('')}\n            </div>\n          </div>`;\n}\n\nfunction dataWeather(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-data-set\">\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Температура: <span class=\"b-data-set__val\">${data.temperature} C</span>\n                </p>\n              </div>\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Влажность: <span class=\"b-data-set__val\">${data.humidity}%</span>\n                </p>\n              </div>\n            </div>\n          </div>`;\n}\n\nfunction dataMusic(data) {\n  return `<div class=\"b-card__data\"> \n           <div class=\"b-music\">\n            <div class=\"b-music__section\">\n              <div class=\"b-music__logo\">\n                <img src=\"${data.albumcover}\" alt=\"${data.artist}\">\n              </div>\n              <div class=\"b-music__info\">\n                <p class=\"b-music__name\">\n                 ${data.artist} - ${data.track.name}\n                </p>\n                <div class=\"b-music__duration\">\n                  <input id='range-1' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\"/>\n                  <label for=\"range-1\">${data.track.length}</label>\n                </div>\n              </div>\n            </div>\n            <div class=\"b-music__section\">\n              <div class=\"b-music__controls\">\n                <button class=\"b-music__prev icon i-prev\"></button>\n                <button class=\"b-music__next icon i-next\"></button>\n                <div class=\"b-music__val\">\n                  <input id='range-2' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\" value=\"${data.volume}\"/>\n                  <label for=\"range-2\">${data.volume}%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>`;\n}\n\nfunction insertHtml($parent, $content) {\n  $parent.append($content);\n}\n"],"sourceRoot":"/source/"}