{"version":3,"sources":["main.js"],"names":["is_touch_device","window","$","scroll","this","scrollTop","document","ready","handleEvents","css","outerHeight","on","toggleClass","removeClass","body","addClass","Handler","selector","_classCallCheck","$imgWrap","$img","height","maxHeight","minHeight","parent","leftLim","left","curPosX","curPosY","difY","undefined","console","hendlPointerEvents","zoom","lastTap","log","getLim","topLim","width","top","e","clientX","clientY","checkLim","length","x1","events","y1","x2","y2","curDistance","getDistance","distance","dif","sqrt","pow","Math","now","Date","timesince","zoomImg","originalEvent","filter","item","pointerId","_this","pointerMove","pointerDown","pointerUp","template","event","card","type","icon","title","source","time","description","dataMain","insertHtml","data","dataTemplate","albumcover","dataMusic","temperature","dataWeather","dataButtons","image","dataImage","dataGraph","buttons","map","btn","join","$parent","humidity","artist","track","name","volume","$content","append","getJSON","each","getTime","i"],"mappings":"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","file":"main.js","sourcesContent":["function is_touch_device() {\n  return !!('ontouchstart' in window);\n}\n\n$(document).ready(handleEvents);\n\nfunction handleEvents() {\n  // Фиксация хедера при скролле\n  $(window).scroll(function () {\n    if ($(this).scrollTop() > 150) {\n      $('body').addClass('head-is-fixed');\n      $('.head-is-fixed').css('margin-top', $('.js-head').outerHeight(true));\n    } else {\n      $('.head-is-fixed').css('margin-top', 0);\n      $('body').removeClass('head-is-fixed');\n    }\n  });\n\n  //Выпадающее меню\n  $('.js-menu-bar').on('click', function () {\n    $(this).toggleClass('is-active');\n  });\n\n  // Проверяем тип устройства\n  if (is_touch_device()) $(document.body).addClass('is-touch');\n  else $(document.body).addClass('no-touch');\n}\n\nclass Handler {\n  constructor(selector) {\n    this.selector = $(selector);\n    this.$imgWrap = $('.js-img-wrapper', this.selector);\n    this.$img = $('img', this.$imgWrap);\n    this.height = this.$img.height();\n    this.maxHeight = 1.5;\n    this.minHeight = this.$imgWrap.parent().height();\n\n    this.left = 0;\n    this.top = 0;\n    this.curPosX = 0;\n    this.curPosY = 0;\n    this.difX = 0;\n    this.difY = 0;\n    this.leftLim = 0;\n    this.topLim = 0;\n\n    this.events = [];\n    this.distance = 0;\n\n    this.zoom = false;\n    this.lastTap = undefined;\n    $(document).ready(this.console());\n    this.hendlPointerEvents(this.selector);\n  }\n\n  console() {\n    console.log('console');\n    console.log(this.selector);\n    console.log(this.$imgWrap);\n    console.log(this.height);\n    console.log(this.maxHeight);\n    console.log(this.minHeight);\n  }\n\n  zoomImg() {\n    if (this.zoom) {\n      console.log('123');\n      console.log(this.height);\n      this.$img.height(this.height);\n      this.zoom = !this.zoom;\n    } else {\n      this.height = this.$img.height();\n      this.maxHeight = 2 * this.height;\n      this.$img.height(this.maxHeight);\n      this.getLim();\n      this.zoom = !this.zoom;\n    }\n  }\n\n  getLim() {\n    console.log('getLim');\n    this.topLim = (this.$imgWrap.height() - this.$imgWrap.parent().height()) / 2;\n    this.leftLim = (this.$imgWrap.width() - this.$imgWrap.parent().width()) / 2;\n  }\n\n  checkLim() {\n    console.log('checkLim');\n    this.top >= this.topLim ? this.top = this.topLim : '';\n    this.top <= -this.topLim ? this.top = -this.topLim : '';\n\n    this.left >= this.leftLim ? this.left = this.leftLim : '';\n    this.left <= -this.leftLim ? this.left = -this.leftLim : '';\n\n  }\n\n  pointerMove(e) {\n    console.log('pointerMove');\n    this.left = e.clientX - this.curPosX;\n    this.top = e.clientY - this.curPosY;\n    this.checkLim();\n    this.$img.css('transform', 'translate(' + this.left + 'px, ' + this.top + 'px)');\n\n    if (this.events.length === 2) {\n      let x1 = this.events[0].clientX;\n      let y1 = this.events[0].clientY;\n      let x2 = this.events[1].clientX;\n      let y2 = this.events[1].clientY;\n      let curDistance = this.getDistance(x1, y1, x2, y2);\n\n      if (curDistance !== this.distance) {\n        let dif = curDistance - this.distance;\n\n        this.$img.height(this.$img.height + dif);\n        this.getLim();\n\n      }\n    }\n  }\n\n  getDistance(x1, y1, x2, y2) {\n    return Math.sqrt(Math.pow((x2 - x1), 2) + Math.pow((y2 - y1), 2));\n  }\n\n  pointerDown(e) {\n    console.log('pointerDown');\n    let now = new Date().getTime();\n    this.curPosX = e.clientX;\n    this.curPosY = e.clientY;\n    this.getLim();\n\n    let timesince = now - this.lastTap;\n    if ((timesince < 500) && (timesince > 0)) this.zoomImg();\n    this.lastTap = new Date().getTime();\n    console.log(e.originalEvent);\n    this.events.push(e.originalEvent);\n    console.log(this.events);\n  }\n\n  pointerUp(e) {\n    this.events = this.events.filter((item) => item.pointerId !== e.originalEvent.pointerId);\n  }\n\n  hendlPointerEvents(selector) {\n    console.log('hendlPointerEvents');\n    if (is_touch_device()) {\n      selector.on('pointermove', e => this.pointerMove(e));\n      selector.on('pointerdown', e => this.pointerDown(e));\n      selector.on('pointerup', e => this.pointerUp(e));\n\n    }\n  }\n}\n\n\n$.getJSON(\"assets/json/events.json\").done(function (data) {\n  $.each(data.events, function (i, item) {\n    template(item);\n  });\n  $('.js-pointer-event').each(function (i, e) {\n    new Handler(e);\n  })\n});\n\nfunction template(event) {\n  let card = `<div class=\"b-card mod-${event.size}  ${event.type === 'critical' ? `mod-attention` : ''} \">\n      <div class=\"b-card__head\">\n        <header>\n          <i class=\"b-card__ico icon i-${event.icon}\"></i>\n          <h3 class=\"b-card__title\">${event.title}</h3>\n        </header>\n        <div class=\"b-card__info\">\n          <span class=\"b-card__name\">${event.source}</span>\n          <span class=\"b-card__time\">${event.time}</span>\n        </div>\n      </div>\n      ${event.description || event.data ? dataMain(event) : ''}\n      <button class=\"b-card__close\"><i class=\"b-card__ico icon i-close\"></i>\n      </button>\n      <a href=\"#\" class=\"b-card__link\">\n        <i class=\"b-card__ico icon i-arrow-r\"></i>\n      </a>\n    </div>`;\n  insertHtml($('#js-card-list'), $(card));\n}\n\nfunction dataMain(data) {\n  return `<div class=\"b-card__main\">\n      ${data.description ? `<p class='b-card__text'>${data.description}</p>` : ''}\n      ${data.data ? dataTemplate(data.data) : ''}\n      </div>`;\n}\n\nfunction dataTemplate(data) {\n  return `${data.albumcover ? dataMusic(data) : ''}\n  ${data.temperature ? dataWeather(data) : ''}\n  ${data.buttons ? dataButtons(data) : ''}\n  ${data.image ? dataImage(data) : ''}\n  ${data.type === 'graph' ? dataGraph(data) : ''}`;\n}\n\nfunction dataGraph(data) {\n  return `<div class=\"b-card__data\">\n           <picture>\n            <source srcset=\"assets/img/Richdata.svg\" type=\"image/svg+xml\">\n            <img src=\"assets/img/Richdata@2x.png\" alt=\"yandex\">\n          </picture>\n          </div>`\n}\n\nfunction dataImage(data) {\n  return `<div class=\"b-card__data js-pointer-event\">\n          <div class=\"b-cam\">\n            <div class=\"b-cam__img\">\n            <div class=\"b-cam__wrapper js-img-wrapper\">\n            <img src=\"assets/img/card-1.png\" alt=\"yandex\"\n               srcset=\"assets/img/card-1@x2.png 800w, assets/img/card-1@x3.png 1200w\">\n               </div>\n               </div>\n            <div class=\"b-cam__stat mod-only-touch\">\n              <span>Приближение: <span class=\"js-zoom\">78</span>%</span>\n              <span>Яркость: <span class=\"brightness\">50</span>%</span>\n            </div>\n            </div>\n           </div>`\n}\n\nfunction dataButtons(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-card__btns\">\n                ${data.buttons.map(btn => ` <button class=\"b-btn ${btn === 'Да' ? `mod-yellow` : '' }\">${btn}</button>`).join('')}\n            </div>\n          </div>`;\n}\n\nfunction dataWeather(data) {\n  return `<div class=\"b-card__data\">\n            <div class=\"b-data-set\">\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Температура: <span class=\"b-data-set__val\">${data.temperature} C</span>\n                </p>\n              </div>\n              <div class=\"b-data-set__item\">\n                <p class=\"b-data-set__name\">\n                  Влажность: <span class=\"b-data-set__val\">${data.humidity}%</span>\n                </p>\n              </div>\n            </div>\n          </div>`;\n}\n\nfunction dataMusic(data) {\n  return `<div class=\"b-card__data\"> \n           <div class=\"b-music\">\n            <div class=\"b-music__section\">\n              <div class=\"b-music__logo\">\n                <img src=\"${data.albumcover}\" alt=\"${data.artist}\">\n              </div>\n              <div class=\"b-music__info\">\n                <p class=\"b-music__name\">\n                 ${data.artist} - ${data.track.name}\n                </p>\n                <div class=\"b-music__duration\">\n                  <input id='range-1' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\"/>\n                  <label for=\"range-1\">${data.track.length}</label>\n                </div>\n              </div>\n            </div>\n            <div class=\"b-music__section\">\n              <div class=\"b-music__controls\">\n                <button class=\"b-music__prev icon i-prev\"></button>\n                <button class=\"b-music__next icon i-next\"></button>\n                <div class=\"b-music__val\">\n                  <input id='range-2' type=\"range\" name=\"volume\"\n                         min=\"0\" max=\"100\" value=\"${data.volume}\"/>\n                  <label for=\"range-2\">${data.volume}%</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>`;\n}\n\nfunction insertHtml($parent, $content) {\n  $parent.append($content);\n}\n"],"sourceRoot":"/source/"}